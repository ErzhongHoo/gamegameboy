<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Test | GameGameBoy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'apple-blue': '#007AFF',
                        'apple-gray': '#8E8E93',
                        'apple-light-gray': '#F2F2F7'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white text-gray-900 font-sans">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6 text-center">ğŸ” Search Functionality Test</h1>

        <!-- Test Search Component -->
        <div class="bg-white border rounded-lg p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">æµ‹è¯•æœç´¢åŠŸèƒ½</h2>

            <div class="relative max-w-2xl mx-auto mb-8">
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="æœç´¢æ¸¸æˆ... (Ctrl+K)"
                        class="w-full pl-12 pr-24 py-4 rounded-full text-gray-900 text-lg shadow-lg focus:outline-none focus:ring-4 focus:ring-apple-blue focus:ring-opacity-50 border border-gray-200"
                        autocomplete="off"
                    >
                    <div class="absolute inset-y-0 right-0 flex items-center pr-2">
                        <button
                            id="searchButton"
                            onclick="performEnhancedSearch()"
                            class="bg-apple-blue text-white px-6 py-2 rounded-full hover:bg-blue-600 transition-colors flex items-center gap-2"
                            aria-label="Search"
                        >
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            Search
                        </button>
                        <button
                            id="clearSearchButton"
                            class="ml-2 text-gray-400 hover:text-gray-600 transition-colors hidden"
                            aria-label="Clear search"
                            onclick="clearSearch()"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Test Tags -->
                <div class="mt-3 flex flex-wrap gap-2 justify-center">
                    <span class="text-sm text-gray-500">æµ‹è¯•æœç´¢:</span>
                    <button onclick="searchGame('Vex')" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full transition-colors">Vex</button>
                    <button onclick="searchGame('Minecraft')" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full transition-colors">Minecraft</button>
                    <button onclick="searchGame('Puzzle')" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full transition-colors">Puzzle</button>
                    <button onclick="searchGame('Racing')" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full transition-colors">Racing</button>
                </div>
            </div>
        </div>

        <!-- Sample Games -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-4">ç¤ºä¾‹æ¸¸æˆåˆ—è¡¨</h2>
            <div id="gamesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all hover:scale-105">
                    <div class="aspect-video bg-gradient-to-br from-red-500 to-orange-500 flex items-center justify-center">
                        <span class="text-white text-4xl">ğŸƒ</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold mb-2">Vex 9</h4>
                        <p class="text-sm text-gray-600 mb-3">åˆºæ¿€çš„è·‘é…·å†’é™©æ¸¸æˆï¼</p>
                        <a href="#" class="w-full bg-apple-blue text-white py-2 rounded hover:bg-blue-600 transition-colors block text-center">Play Now</a>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all hover:scale-105">
                    <div class="aspect-video bg-gradient-to-br from-green-600 to-brown-600 flex items-center justify-center">
                        <span class="text-white text-4xl">â›ï¸</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold mb-2">Minecraft Classic</h4>
                        <p class="text-sm text-gray-600 mb-3">ç»å…¸çš„æ²™ç›’å»ºé€ æ¸¸æˆï¼</p>
                        <a href="#" class="w-full bg-apple-blue text-white py-2 rounded hover:bg-blue-600 transition-colors block text-center">Play Now</a>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all hover:scale-105">
                    <div class="aspect-video bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
                        <span class="text-white text-4xl">ğŸ§©</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold mb-2">Bloxorz</h4>
                        <p class="text-sm text-gray-600 mb-3">æŒ‘æˆ˜ä½ çš„æ™ºåŠ›æ‹¼å›¾æ¸¸æˆï¼</p>
                        <a href="#" class="w-full bg-apple-blue text-white py-2 rounded hover:bg-blue-600 transition-colors block text-center">Play Now</a>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all hover:scale-105">
                    <div class="aspect-video bg-gradient-to-br from-blue-600 to-green-500 flex items-center justify-center">
                        <span class="text-white text-4xl">ğŸ</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold mb-2">Hill Climb Racing</h4>
                        <p class="text-sm text-gray-600 mb-3">åˆºæ¿€çš„èµ›è½¦ç«é€Ÿæ¸¸æˆï¼</p>
                        <a href="#" class="w-full bg-apple-blue text-white py-2 rounded hover:bg-blue-600 transition-colors block text-center">Play Now</a>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all hover:scale-105">
                    <div class="aspect-video bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center">
                        <span class="text-white text-4xl">ğŸ”¥</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold mb-2">Fireboy and Watergirl</h4>
                        <p class="text-sm text-gray-600 mb-3">åˆä½œå†’é™©è§£è°œæ¸¸æˆï¼</p>
                        <a href="#" class="w-full bg-apple-blue text-white py-2 rounded hover:bg-blue-600 transition-colors block text-center">Play Now</a>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all hover:scale-105">
                    <div class="aspect-video bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                        <span class="text-white text-4xl">ğŸ”·</span>
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold mb-2">Geometry Dash</h4>
                        <p class="text-sm text-gray-600 mb-3">èŠ‚å¥åŠ¨ä½œå†’é™©æ¸¸æˆï¼</p>
                        <a href="#" class="w-full bg-apple-blue text-white py-2 rounded hover:bg-blue-600 transition-colors block text-center">Play Now</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Results -->
        <div id="searchResultsCount"></div>

        <!-- Instructions -->
        <div class="bg-gray-50 rounded-lg p-6">
            <h2 class="text-xl font-semibold mb-4">æµ‹è¯•è¯´æ˜</h2>
            <div class="space-y-2 text-sm text-gray-600">
                <p>âœ… <strong>ç‚¹å‡»æœç´¢æŒ‰é’®:</strong> ç‚¹å‡»"Search"æŒ‰é’®æ‰§è¡Œæœç´¢</p>
                <p>âœ… <strong>è¾“å…¥æœç´¢:</strong> åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æ¸¸æˆåç§°ï¼Œå¦‚"Vex"ã€"Minecraft"ç­‰</p>
                <p>âœ… <strong>å¿«æ·é”®:</strong> æŒ‰ Ctrl+K å¿«é€Ÿèšç„¦æœç´¢æ¡†</p>
                <p>âœ… <strong>Enteræœç´¢:</strong> è¾“å…¥åæŒ‰ Enter é”®æœç´¢</p>
                <p>âœ… <strong>ESCæ¸…ç©º:</strong> æŒ‰ ESC é”®æ¸…ç©ºæœç´¢</p>
                <p>âœ… <strong>å¿«é€Ÿæ ‡ç­¾:</strong> ç‚¹å‡»ä¸‹æ–¹çš„æ ‡ç­¾æŒ‰é’®å¿«é€Ÿæœç´¢</p>
                <p>âœ… <strong>æ¸…ç©ºæŒ‰é’®:</strong> è¾“å…¥å†…å®¹åå³ä¾§ä¼šæ˜¾ç¤ºæ¸…ç©ºæŒ‰é’®</p>
            </div>
        </div>
    </div>

    <script>
        // æœç´¢åŠŸèƒ½è„šæœ¬
        function performEnhancedSearch() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                const searchTerm = searchInput.value.toLowerCase().trim();
                if (searchTerm) {
                    console.log('ğŸ” æœç´¢:', searchTerm);

                    // è¿‡æ»¤æ¸¸æˆå¡ç‰‡
                    const gameCards = document.querySelectorAll('.game-card');
                    let visibleCount = 0;

                    gameCards.forEach(card => {
                        const title = card.querySelector('h4');
                        const description = card.querySelector('p');

                        if (title && description) {
                            const titleText = title.textContent.toLowerCase();
                            const descText = description.textContent.toLowerCase();

                            if (titleText.includes(searchTerm) || descText.includes(searchTerm)) {
                                card.style.display = 'block';
                                visibleCount++;
                            } else {
                                card.style.display = 'none';
                            }
                        }
                    });

                    // æ˜¾ç¤ºæœç´¢ç»“æœç»Ÿè®¡
                    showSearchResultsCount(visibleCount, searchTerm);

                    // æ»šåŠ¨åˆ°ç¬¬ä¸€ä¸ªç»“æœ
                    const firstVisible = document.querySelector('.game-card:not([style*="display: none"])');
                    if (firstVisible) {
                        firstVisible.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }

                    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    console.log(`âœ… æœç´¢å®Œæˆï¼Œæ‰¾åˆ° ${visibleCount} ä¸ªç»“æœ`);
                } else {
                    clearSearch();
                }
            }
        }

        // æ˜¾ç¤ºæœç´¢ç»“æœç»Ÿè®¡
        function showSearchResultsCount(count, searchTerm) {
            let countElement = document.getElementById('searchResultsCount');

            if (!countElement) {
                countElement = document.createElement('div');
                countElement.id = 'searchResultsCount';
                countElement.className = 'text-center mb-4';
                document.getElementById('gamesGrid').appendChild(countElement);
            }

            if (count === 0) {
                countElement.innerHTML = `
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                        <h3 class="text-lg font-semibold text-yellow-800 mb-2">ğŸ˜” æ²¡æœ‰æ‰¾åˆ°æ¸¸æˆ</h3>
                        <p class="text-yellow-700">æ²¡æœ‰æ‰¾åˆ°åŒ¹é… "${searchTerm}" çš„æ¸¸æˆï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ã€‚</p>
                    </div>
                `;
            } else {
                countElement.innerHTML = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h3 class="text-lg font-semibold text-blue-800 mb-2">ğŸ® æœç´¢ç»“æœ</h3>
                        <p class="text-blue-700">æ‰¾åˆ° ${count} ä¸ªåŒ¹é… "${searchTerm}" çš„æ¸¸æˆ</p>
                    </div>
                `;
            }
        }

        // æ¸…ç©ºæœç´¢
        function clearSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('clearSearchButton');

            if (searchInput) {
                searchInput.value = '';
            }
            if (clearButton) {
                clearButton.classList.add('hidden');
            }

            // æ˜¾ç¤ºæ‰€æœ‰æ¸¸æˆ
            const gameCards = document.querySelectorAll('.game-card');
            gameCards.forEach(card => {
                card.style.display = 'block';
            });

            // ç§»é™¤æœç´¢ç»“æœç»Ÿè®¡
            const countElement = document.getElementById('searchResultsCount');
            if (countElement) {
                countElement.innerHTML = '';
            }

            console.log('ğŸ§¹ æœç´¢å·²æ¸…ç©º');
        }

        // æœç´¢æ¸¸æˆï¼ˆç”¨äºå¿«é€Ÿæ ‡ç­¾ï¼‰
        function searchGame(gameName) {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.value = gameName;
                performEnhancedSearch();
            }
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ æœç´¢æµ‹è¯•é¡µé¢å·²åŠ è½½');

            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('clearSearchButton');
            const searchButton = document.getElementById('searchButton');

            if (searchInput && clearButton && searchButton) {
                // è¾“å…¥äº‹ä»¶
                searchInput.addEventListener('input', function() {
                    console.log('âŒ¨ï¸ è¾“å…¥å†…å®¹:', this.value);
                    if (this.value.trim()) {
                        clearButton.classList.remove('hidden');
                    } else {
                        clearButton.classList.add('hidden');
                    }
                });

                // Enteré”®æœç´¢
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        console.log('â Enteré”®è§¦å‘æœç´¢');
                        performEnhancedSearch();
                    }
                });

                // ESCé”®æ¸…ç©º
                searchInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        console.log('â‹ ESCé”®æ¸…ç©ºæœç´¢');
                        clearSearch();
                    }
                });

                // æœç´¢æŒ‰é’®ç‚¹å‡»æµ‹è¯•
                searchButton.addEventListener('click', function() {
                    console.log('ğŸ–±ï¸ æœç´¢æŒ‰é’®è¢«ç‚¹å‡»');
                });

                console.log('âœ… æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨å·²ç»‘å®š');
            }

            // Ctrl+K å¿«æ·é”®
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    console.log('âŒ¨ï¸ Ctrl+K å¿«æ·é”®è§¦å‘');
                    if (searchInput) {
                        searchInput.focus();
                        searchInput.select();
                    }
                }
            });
        });
    </script>
</body>
</html>